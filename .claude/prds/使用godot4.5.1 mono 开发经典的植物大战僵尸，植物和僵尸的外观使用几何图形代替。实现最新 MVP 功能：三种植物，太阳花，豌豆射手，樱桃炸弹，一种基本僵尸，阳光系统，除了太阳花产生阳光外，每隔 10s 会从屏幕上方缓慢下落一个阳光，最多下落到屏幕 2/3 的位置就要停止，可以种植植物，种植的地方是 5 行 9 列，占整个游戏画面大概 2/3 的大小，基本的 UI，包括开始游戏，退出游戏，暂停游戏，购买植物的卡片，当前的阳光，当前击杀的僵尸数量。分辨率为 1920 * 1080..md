---
name: 使用godot4.5.1 mono 开发经典的植物大战僵尸，植物和僵尸的外观使用几何图形代替。实现最新 MVP 功能：三种植物，太阳花，豌豆射手，樱桃炸弹，一种基本僵尸，阳光系统，除了太阳花产生阳光外，每隔 10s 会从屏幕上方缓慢下落一个阳光，最多下落到屏幕 2/3 的位置就要停止，可以种植植物，种植的地方是 5 行 9 列，占整个游戏画面大概 2/3 的大小，基本的 UI，包括开始游戏，退出游戏，暂停游戏，购买植物的卡片，当前的阳光，当前击杀的僵尸数量。分辨率为 1920 * 1080.
description: 使用 Godot 4.5.1 Mono 开发的经典植物大战僵尸塔防游戏 MVP 版本，使用几何图形代替传统贴图，实现核心游戏机制。
status: backlog
created: 2025-11-23T00:40:45Z
---

# PRD: 使用 Godot 4.5.1 Mono 开发经典植物大战僵尸 MVP 版本

## Executive Summary

本项目旨在使用 Godot 4.5.1 Mono 引擎开发经典植物大战僵尸塔防游戏的 MVP 版本。通过使用简单的几何图形代替复杂的美术资源，专注于实现核心游戏机制和玩家体验。MVP 版本包含三种基础植物、一种僵尸类型、完整的阳光经济系统和基础 UI 界面，为后续功能扩展奠定坚实的技术和游戏基础。

## Problem Statement

### 核心问题
1. **技术验证需求**：需要验证 Godot 4.5.1 Mono 在塔防游戏开发中的可行性和性能表现
2. **游戏机制验证**：需要实现并验证核心塔防机制的有效性和可玩性
3. **快速原型需求**：在有限资源下快速验证游戏概念，避免复杂的美术制作流程

### 为什么是现在
- Godot 4.5.1 Mono 已经成熟稳定，具备开发商业级游戏的能力
- 塔防游戏市场仍有创新空间，几何图形风格可以作为差异化特色
- 团队需要积累 Godot 开发经验，为后续大型项目做准备

## User Stories

### 主要用户画像

**休闲游戏玩家**
- 年龄：16-35岁
- 特征：喜欢简单易懂但有深度的策略游戏
- 需求：快速上手，短暂游戏时间内获得成就感

**技术验证者**
- 角色：开发团队和利益相关者
- 需求：验证技术方案可行性和游戏机制有效性

### 详细用户旅程

**新玩家首次游戏体验**
1. **进入游戏** → 看到主界面，包含开始游戏、退出游戏选项
2. **开始游戏** → 进入游戏场景，看到植物选择卡片和草坪区域
3. **理解机制** → 通过视觉提示理解阳光收集和植物种植
4. **首次挑战** → 第一个僵尸出现，玩家需要快速应对
5. **获得成就感** → 成功击杀僵尸，理解游戏核心循环

**核心游戏循环**
- 收集阳光 → 选择植物 → 种植防御 → 抵御僵尸 → 获得奖励 → 继续强化

### 痛点解决方案
- **复杂美术制作成本** → 使用简单几何图形，降低开发成本
- **学习曲线陡峭** → 简化界面，直观的操作方式
- **游戏节奏控制** → 合理的难度递增和反馈机制

## Requirements

### 功能性需求

#### 核心游戏机制
**FR-1: 植物系统**
- **FR-1.1**: 太阳花 - 产生阳光，成本50单位，每5秒产生25阳光
- **FR-1.2**: 豌豆射手 - 发射豌豆攻击僵尸，成本100单位，每秒发射一个豌豆子弹
- **FR-1.3**: 樱桃炸弹 - 范围爆炸攻击，成本150单位，一次性使用，准备2秒后爆炸

**FR-2: 僵尸系统**
- **FR-2.1**: 基础僵尸 - 直线行走，血量100，移动速度1格/3秒
- **FR-2.2**: 僵尸出现机制 - 第一波在游戏开始30秒后出现，后续每20秒增加难度
- **FR-2.3**: 僵尸AI - 遇到植物时开始攻击，攻击伤害10/秒

**FR-3: 阳光系统**
- **FR-3.1**: 太阳花产生阳光 - 每5秒产生25单位阳光
- **FR-3.2**: 天降阳光 - 每10秒从屏幕顶部随机位置下落，下落到屏幕2/3处停止
- **FR-3.3**: 阳光收集 - 玩家点击阳光进行收集，每个阳光价值25单位
- **FR-3.4**: 阳光上限 - 玩家最多持有999单位阳光

**FR-4: 种植系统**
- **FR-4.1**: 种植网格 - 5行9列的标准网格，占游戏画面2/3
- **FR-4.2**: 种植规则 - 每个格子只能种植一个植物
- **FR-4.3**: 种植验证 - 检查阳光是否足够，位置是否有效
- **FR-4.4**: 植物移除 - 右键点击可以移除植物（返还50%成本）

#### UI 界面系统
**FR-5: 游戏主界面**
- **FR-5.1**: 开始游戏按钮 - 启动新的游戏会话
- **FR-5.2**: 退出游戏按钮 - 关闭游戏应用
- **FR-5.3**: 游戏标题和简单背景

**FR-6: 游戏内界面**
- **FR-6.1**: 植物选择卡片 - 显示三种植物及其成本
- **FR-6.2**: 当前阳光显示 - 实时显示玩家持有阳光数量
- **FR-6.3**: 击杀计数 - 显示当前击杀僵尸数量
- **FR-6.4**: 暂停按钮 - 暂停/恢复游戏进行

**FR-7: 游戏状态管理**
- **FR-7.1**: 游戏开始 - 初始化游戏场景和资源
- **FR-7.2**: 游戏暂停 - 停止所有游戏逻辑，显示暂停界面
- **FR-7.3**: 游戏继续 - 恢复游戏逻辑执行
- **FR-7.4**: 游戏结束 - 显示胜利或失败界面

#### 游戏规则
**FR-8: 胜利条件**
- **FR-8.1**: 生存目标 - 玩家生存10分钟视为胜利
- **FR-8.2**: 击杀目标 - 击杀20个僵尸视为胜利

**FR-9: 失败条件**
- **FR-9.1**: 僵尸突破 - 任何僵尸到达屏幕左边界
- **FR-9.2**: 植物全灭 - 所有植物被僵尸摧毁

### 非功能性需求

#### 性能需求
**NFR-1: 帧率要求**
- 游戏运行时保持60 FPS
- 最多同时显示50个游戏对象时不低于30 FPS

**NFR-2: 响应时间**
- 用户点击响应延迟不超过100ms
- 植物种植和阳光收集动画流畅

**NFR-3: 内存使用**
- 游戏总内存占用不超过512MB
- 支持至少连续运行1小时无内存泄漏

#### 技术需求
**NFR-4: 平台兼容性**
- 支持 Windows 10/11 和 macOS 10.15+
- 支持键盘和鼠标操作

**NFR-5: 分辨率适配**
- 固定分辨率1920x1080，不支持窗口缩放
- UI元素在目标分辨率下正确显示

**NFR-6: 数据持久化**
- 游戏设置自动保存
- 最高分记录本地存储

## Success Criteria

### 核心指标
- **游戏完成率**: 80%的新玩家能够完成第一关
- **平均游戏时长**: 5-15分钟的单次游戏时长
- **技术稳定性**: 游戏崩溃率低于1%

### 验收标准
- [ ] 所有功能需求100%实现并通过测试
- [ ] 游戏能够在目标平台上稳定运行
- [ ] 性能指标达到非功能性需求要求
- [ ] 通过用户体验测试，获得积极反馈

### 关键里程碑
1. **技术原型** (2周) - 核心游戏机制可演示
2. **功能完整** (4周) - 所有MVP功能实现
3. **测试优化** (1周) - 性能优化和bug修复
4. **发布就绪** (0.5周) - 最终测试和打包

## Constraints & Assumptions

### 技术约束
- **开发工具**: 必须使用 Godot 4.5.1 Mono 版本
- **图形风格**: 只能使用简单几何图形，不使用外部贴图
- **开发周期**: 总开发时间不超过7周
- **团队规模**: 1-3人小团队开发

### 业务约束
- **预算限制**: 避免购买昂贵的第三方插件或资源
- **时间限制**: 需要在指定时间内完成MVP版本
- **平台限制**: 优先支持PC平台，移动平台为后续考虑

### 假设条件
- **技术假设**: 团队具备基础的 C# 和 Godot 开发经验
- **市场假设**: 几何图形风格在目标用户群体中可接受
- **资源假设**: 开发设备能够满足 Godot 4.5.1 的运行要求

## Out of Scope

### 明确排除的功能
- **复杂关卡系统** - MVP版本只包含单一关卡
- **多种僵尸类型** - 只实现基础僵尸
- **植物升级系统** - 植物能力固定，不支持升级
- **音效和音乐** - 暂不实现音频系统
- **存档系统** - 不支持游戏进度的保存和读取
- **多人游戏** - 仅支持单人游戏模式
- **成就系统** - 不包含成就和奖励机制
- **内购系统** - 不包含任何商业化功能

### 后续版本考虑
- 更多植物和僵尸类型
- 关卡编辑器
- 音效和背景音乐
- 移动平台适配
- 云端存档

## Dependencies

### 外部依赖
- **Godot 4.5.1 Mono** - 游戏引擎和开发环境
- **.NET 8.0** - C# 运行时环境
- **操作系统** - Windows 10+ 或 macOS 10.15+

### 内部依赖
- **开发团队** - 需要1名主程序 + 1名辅助开发
- **测试设备** - 不同配置的PC和Mac设备
- **项目管理** - 使用 Claude Code 和 GDAI MCP 工具链

### 技术风险评估
- **Godot 4.5.1 稳定性** - 新版本可能存在未知bug
- **Mono性能** - C# 在 Godot 中的性能表现需要验证
- **几何图形限制** - 简单图形可能影响游戏表现力
- **开发时间** - 7周开发周期较为紧张

### 缓解策略
- **技术调研** - 提前进行 Godot 4.5.1 的技术验证
- **原型先行** - 先实现核心机制原型再扩展功能
- **定期评估** - 每周进行进度和风险评估
- **备选方案** - 准备功能裁剪的优先级方案